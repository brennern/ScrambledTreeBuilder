% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/enr.R
\name{computeENR}
\alias{computeENR}
\title{Compute ENR points (Excess Normalized Residuals over a LOESS trend)}
\usage{
computeENR(
  tb,
  span = 0.7,
  family = "symmetric",
  degree = 1,
  use_weights = TRUE,
  std_mode = c("robust_global", "global_sd", "local_loess"),
  span_scale = 0.7
)
}
\arguments{
\item{tb}{A data.frame/tibble with at least columns \code{x} and \code{y}.}

\item{span}{LOESS span for the mean trend (default 0.7).}

\item{family}{LOESS family; \code{"symmetric"} is robust to outliers (default).}

\item{degree}{Local polynomial degree for LOESS (1 = local lines).}

\item{use_weights}{If \code{TRUE}, use column \code{n} as LOESS weights when present.}

\item{std_mode}{One of \code{"robust_global"}, \code{"global_sd"}, or \code{"local_loess"}.
\itemize{
\item \code{robust_global}: global MAD*1.4826 (robust σ)
\item \code{global_sd}: global standard deviation
\item \code{local_loess}: LOESS on \code{abs(resid)} to model local σ
}}

\item{span_scale}{LOESS span used only for the \code{local_loess} sigma fit.}
}
\value{
\code{tb} with added columns:
\itemize{
\item \code{y_hat}: LOESS fitted value at each \code{x}
\item \code{resid}: raw residual \code{y - y_hat}
\item \code{ENRz}: standardized residual (z-like score)
}
}
\description{
Trait-agnostic residual standardization for any y vs x relationship.
Fit a LOESS mean trend ŷ(x), compute residuals r = y - ŷ, and standardize
them to unit-free, z-like scores ENRz. Positive ENRz = above-trend; negative = below-trend.
}
\examples{
# out <- MRCAs(df, focal) |> computeENR()
# head(out)

}
